<div class="custom-section" style="padding-top: {{ section.settings.padding_top | default: 40 }}px; padding-bottom: {{ section.settings.padding_bottom | default: 40 }}px;">
  {% if section.settings.background_image %}
    <div class="custom-section__background">
      <img src="{{ section.settings.background_image | image_url: width: 2000 }}" alt="" loading="lazy">
    </div>
  {% endif %}

  <div class="custom-section__content container">
    {% for block in section.blocks %}
      <div class="custom-section__block" {{ block.shopify_attributes }}>
        {% case block.type %}
          {% when 'text' %}
            {% render 'text', block: block %}
          {% when 'image-with-text' %}
            {% render 'image-with-text', block: block %}
          {% when 'call-to-action' %}
            {% render 'call-to-action', block: block %}
          {% when 'feature' %}
            {% render 'feature', block: block %}
          {% when 'spacer' %}
            {% render 'spacer', block: block %}
        {% endcase %}
      </div>
    {% endfor %}
  </div>
</div>

{% stylesheet %}
  .custom-section {
    position: relative;
    width: 100%;
  }
  
  .custom-section__background {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -1;
    overflow: hidden;
  }
  
  .custom-section__background img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
  
  .custom-section__content {
    position: relative;
    z-index: 1;
  }
  
  .custom-section__block {
    margin-bottom: 2rem;
  }
  
  .custom-section__block:last-child {
    margin-bottom: 0;
  }
  
  .container {
    max-width: var(--page-width, 1200px);
    margin: 0 auto;
    padding: 0 var(--page-margin, 20px);
  }
{% endstylesheet %}

{% schema %}
{
  "name": "Custom Section",
  "blocks": [
    {
      "type": "text",
      "name": "Text"
    },
    {
      "type": "image-with-text",
      "name": "Image with Text"
    },
    {
      "type": "call-to-action",
      "name": "Call to Action"
    },
    {
      "type": "feature",
      "name": "Feature"
    },
    {
      "type": "spacer",
      "name": "Spacer"
    }
  ],
  "settings": [
    {
      "type": "image_picker",
      "id": "background_image",
      "label": "Background Image"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "px",
      "label": "Top Padding",
      "default": 40
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "px",
      "label": "Bottom Padding",
      "default": 40
    }
  ],
  "presets": [
    {
      "name": "Custom Section"
    }
  ]
}
{% endschema %}
