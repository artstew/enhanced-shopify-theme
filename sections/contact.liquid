{% comment %}
  Contact section with form and contact information
{% endcomment %}

<section class="contact section-{{ section.id }}" {{ section.shopify_attributes }}>
  <div class="contact__container">
    {% if section.settings.heading != blank %}
      <div class="contact__header">
        <h2 class="contact__heading">{{ section.settings.heading }}</h2>
        {% if section.settings.subheading != blank %}
          <p class="contact__subheading">{{ section.settings.subheading }}</p>
        {% endif %}
      </div>
    {% endif %}
    
    <div class="contact__content">
      <div class="contact__info">
        <h3>Get in Touch</h3>
        
        {% if section.settings.address != blank %}
          <div class="contact__item">
            <strong>Address:</strong>
            <p>{{ section.settings.address }}</p>
          </div>
        {% endif %}
        
        {% if section.settings.phone != blank %}
          <div class="contact__item">
            <strong>Phone:</strong>
            <p><a href="tel:{{ section.settings.phone }}">{{ section.settings.phone }}</a></p>
          </div>
        {% endif %}
        
        {% if section.settings.email != blank %}
          <div class="contact__item">
            <strong>Email:</strong>
            <p><a href="mailto:{{ section.settings.email }}">{{ section.settings.email }}</a></p>
          </div>
        {% endif %}
        
        {% if section.settings.hours != blank %}
          <div class="contact__item">
            <strong>Hours:</strong>
            <p>{{ section.settings.hours }}</p>
          </div>
        {% endif %}
      </div>
      
      <div class="contact__form">
        {% form 'contact' %}
          {% if form.posted_successfully? %}
            <div class="contact__success">
              <p>Thank you for your message! We'll get back to you soon.</p>
            </div>
          {% endif %}
          
          {% if form.errors %}
            <div class="contact__errors">
              <p>Please correct the following errors:</p>
              <ul>
                {% for field in form.errors %}
                  <li>{{ field | capitalize }} {{ form.errors[field] }}</li>
                {% endfor %}
              </ul>
            </div>
          {% endif %}
          
          <div class="contact__fields">
            <div class="contact__field">
              <label for="contact-name">Name *</label>
              <input 
                type="text" 
                name="contact[name]" 
                id="contact-name" 
                value="{% if form.name %}{{ form.name }}{% elsif customer %}{{ customer.name }}{% endif %}"
                required
              >
            </div>
            
            <div class="contact__field">
              <label for="contact-email">Email *</label>
              <input 
                type="email" 
                name="contact[email]" 
                id="contact-email" 
                value="{% if form.email %}{{ form.email }}{% elsif customer %}{{ customer.email }}{% endif %}"
                required
              >
            </div>
            
            <div class="contact__field">
              <label for="contact-phone">Phone</label>
              <input 
                type="tel" 
                name="contact[phone]" 
                id="contact-phone" 
                value="{% if form.phone %}{{ form.phone }}{% endif %}"
              >
            </div>
            
            <div class="contact__field contact__field--full">
              <label for="contact-message">Message *</label>
              <textarea 
                name="contact[body]" 
                id="contact-message" 
                rows="5"
                required
              >{% if form.body %}{{ form.body }}{% endif %}</textarea>
            </div>
            
            <div class="contact__field contact__field--full">
              <button type="submit" class="contact__submit">Send Message</button>
            </div>
          </div>
        {% endform %}
      </div>
    </div>
  </div>
</section>

<style>
  {% render 'layout-css', section: section %}
</style>

<style>
  .contact {
    padding: 4rem 2rem;
    background-color: {{ section.settings.background_color | default: '#f8f9fa' }};
  }
  
  .contact__container {
    max-width: 1200px;
    margin: 0 auto;
  }
  
  .contact__header {
    text-align: center;
    margin-bottom: 3rem;
  }
  
  .contact__heading {
    font-size: 2.5rem;
    font-weight: 700;
    margin-bottom: 1rem;
    color: {{ section.settings.heading_color | default: '#333' }};
  }
  
  .contact__subheading {
    font-size: 1.1rem;
    color: #666;
  }
  
  .contact__content {
    display: grid;
    grid-template-columns: 1fr 2fr;
    gap: 3rem;
    align-items: start;
  }
  
  .contact__info h3 {
    font-size: 1.5rem;
    margin-bottom: 1.5rem;
    color: #333;
  }
  
  .contact__item {
    margin-bottom: 1.5rem;
  }
  
  .contact__item strong {
    display: block;
    margin-bottom: 0.5rem;
    color: #333;
  }
  
  .contact__item p {
    margin: 0;
    color: #666;
  }
  
  .contact__item a {
    color: {{ section.settings.accent_color | default: '#007ace' }};
    text-decoration: none;
  }
  
  .contact__item a:hover {
    text-decoration: underline;
  }
  
  .contact__form {
    background: white;
    padding: 2rem;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
  }
  
  .contact__success {
    background-color: #d4edda;
    border: 1px solid #c3e6cb;
    color: #155724;
    padding: 1rem;
    border-radius: 4px;
    margin-bottom: 1rem;
  }
  
  .contact__errors {
    background-color: #f8d7da;
    border: 1px solid #f5c6cb;
    color: #721c24;
    padding: 1rem;
    border-radius: 4px;
    margin-bottom: 1rem;
  }
  
  .contact__fields {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
  }
  
  .contact__field--full {
    grid-column: 1 / -1;
  }
  
  .contact__field label {
    display: block;
    margin-bottom: 0.5rem;
    font-weight: 600;
    color: #333;
  }
  
  .contact__field input,
  .contact__field textarea {
    width: 100%;
    padding: 0.75rem;
    border: 1px solid #ddd;
    border-radius: 4px;
    font-size: 1rem;
    transition: border-color 0.3s ease;
  }
  
  .contact__field input:focus,
  .contact__field textarea:focus {
    outline: none;
    border-color: {{ section.settings.accent_color | default: '#007ace' }};
  }
  
  .contact__submit {
    background-color: {{ section.settings.accent_color | default: '#007ace' }};
    color: white;
    border: none;
    padding: 1rem 2rem;
    border-radius: 4px;
    font-size: 1rem;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }
  
  .contact__submit:hover {
    background-color: #0056b3;
  }
  
  @media (max-width: 768px) {
    .contact { padding: 2rem 1rem; }
    .contact__heading { font-size: 2rem; }
    .contact__content { 
      grid-template-columns: 1fr;
      gap: 2rem;
    }
    .contact__fields {
      grid-template-columns: 1fr;
    }
  }
</style>

{% schema %}
{
  "name": "Contact",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Section Heading",
      "default": "Contact Us"
    },
    {
      "type": "textarea",
      "id": "subheading",
      "label": "Section Subheading",
      "default": "We'd love to hear from you"
    },
    {
      "type": "textarea",
      "id": "address",
      "label": "Address",
      "default": "123 Main Street\nAnytown, ST 12345"
    },
    {
      "type": "text",
      "id": "phone",
      "label": "Phone Number",
      "default": "(555) 123-4567"
    },
    {
      "type": "text",
      "id": "email",
      "label": "Email Address",
      "default": "hello@example.com"
    },
    {
      "type": "textarea",
      "id": "hours",
      "label": "Business Hours",
      "default": "Monday - Friday: 9am - 5pm\nSaturday: 10am - 4pm\nSunday: Closed"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background Color",
      "default": "#f8f9fa"
    },
    {
      "type": "color",
      "id": "heading_color",
      "label": "Heading Color",
      "default": "#333333"
    },
    {
      "type": "color",
      "id": "accent_color",
      "label": "Accent Color",
      "default": "#007ace"
    },
    {
      "type": "header",
      "content": "Layout & Spacing"
    },
    {
      "type": "select",
      "id": "section_width",
      "options": [
        {
          "value": "full-width",
          "label": "Full width"
        },
        {
          "value": "page-width",
          "label": "Page width"
        },
        {
          "value": "narrow",
          "label": "Narrow"
        },
        {
          "value": "wide",
          "label": "Wide"
        }
      ],
      "default": "page-width",
      "label": "Section width"
    },
    {
      "type": "select",
      "id": "content_alignment",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "right",
          "label": "Right"
        }
      ],
      "default": "left",
      "label": "Content alignment"
    }
  ],
  "presets": [
    {
      "name": "Contact"
    }
  ]
}
{% endschema %}